{"version":3,"sources":["plugins/validate.js","components/Auth/useAuthForm.js","components/Auth/AuthForm.jsx","components/Auth/Auth.jsx","components/Users/UsersList.jsx","components/Users/useUsersElements.js","components/Users/FilterSearch.jsx","components/Users/Pagination.jsx","plugins/isEmpty.js","components/Users/Users.jsx","App.js","index.js"],"names":["validate","values","errors","username","test","password","length","useAuthForm","setToken","useState","setValues","setErrors","isLoading","setIsLoading","history","useHistory","controlChange","e","target","name","value","controlSubmit","a","preventDefault","fetch","baseURL","method","headers","body","JSON","stringify","response","ok","json","token","localStorage","setItem","push","alert","AuthForm","id","display","justifyContent","alignItems","className","color","size","action","onSubmit","noValidate","w","mt","htmlFor","type","classNames","onChange","Auth","console","log","to","Users","users","submitSort","onClick","map","user","key","last_name","first_name","useUsersElements","setUsers","sortType","setSortType","filteredUsers","setFilteredUsers","currentPage","setCurrentPage","usersPerPage","indexOfLastListOfUsers","indexOfFirstListOfUsers","currentListOfUsers","slice","onSort","sortField","_","orderBy","getFilteredUsers","useCallback","val","filter","u","toLowerCase","trim","includes","useEffect","Authorization","error","getUsers","controlLogout","clear","onSearch","paginate","pageNumber","FilterSearch","searchName","setSearchName","changeValue","controlSearch","clearSearch","expand","dark","bg","mb","Brand","href","Nav","mx","Input","text","placeholder","mr","outline","info","ml","float","p","m","Toggler","Pagination","totalListOfUsers","i","Math","ceil","number","isEmpty","undefined","Object","keys","UsersList","App","ls","getItem","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.550884d4.chunk.js","sourcesContent":["const validate = values => {\n    let errors = {};\n\n    if (!values.username) {\n        errors.username = \"Введите логин\";\n    } else if (!/^[\\w.@+-]{6,150}$/.test(values.username)) {\n        errors.username = \"Некорректный логин. Такого пользователя нет в системе\";\n    } else if (values.username !== 'test_super') {\n        errors.username = \"Неверный логин\";\n    }\n    if (!values.password) {\n        errors.password = \"Введите пароль\";\n    } else if (values.password.length < 8) {\n        errors.password = \"Пароль должен содержать не менее 8 символов\";\n    } else if (values.password !== 'Nf<U4f<rDbtDxAPn') {\n        errors.password = \"Неверный пароль\";\n    }\n    \n    return errors;\n};\n\nexport default validate;","import { useState } from 'react';\nimport {useHistory} from 'react-router-dom';\n\nconst useAuthForm = (validate, { setToken }) => {\n    const [values, setValues] = useState({ username: \"\", password: \"\" });\n    const [errors, setErrors] = useState({});\n    const [isLoading, setIsLoading] = useState(false);\n    const history = useHistory();\n    const baseURL = 'https://emphasoft-test-assignment.herokuapp.com/';\n    const APItoken = 'api-token-auth/';\n\n    const controlChange = e => {\n        const { name, value } = e.target;\n        setValues({\n          ...values, [name]: value\n        })\n    };\n\n    const controlSubmit = async (e) => {\n        e.preventDefault();\n        setIsLoading(true);\n\n        try {\n          const response = await fetch(baseURL + APItoken, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json;charset=utf-8'\n            },\n            body: JSON.stringify({\n              username: values.username,\n              password: values.password\n            })\n          });\n          if (response.ok) {\n            let json = await response.json();\n            setToken(json.token);\n            localStorage.setItem('token', json.token);\n            history.push('/react-users-app/users');\n          } else {\n            setErrors(validate(values));\n          }\n          setIsLoading(false);\n        }  catch(err) { \n          if (err.name === 'AbortError') {\n            alert('При входе возникли проблемы. Попробуйте зайти позже!');\n            setIsLoading(false);\n          } else {\n            throw err;\n          }\n        }     \n    }\n\n    return {\n        controlChange,\n        controlSubmit,\n        values,\n        errors,\n        isLoading\n    };\n};\n\nexport default useAuthForm;","import React, { Fragment } from 'react';\nimport validate from '../../plugins/validate';\nimport classNames from 'classnames';\nimport { BDiv } from 'bootstrap-4-react';\nimport CubeOutlineIcon from 'mdi-react/CubeOutlineIcon';\n\nimport useAuthForm from './useAuthForm';\n\nconst AuthForm = ({ token, setToken }) => {\n    const { controlChange, \n            controlSubmit, \n            values, \n            errors, \n            isLoading } = useAuthForm(validate, { setToken });\n\n    return (\n        <Fragment>\n            <BDiv \n                id=\"home\" \n                display=\"flex\" \n                justifyContent=\"around\" \n                alignItems=\"center\"\n            >\n                <section className=\"home\">\n                    <BDiv className=\"mt-3 text-center\">\n                        <CubeOutlineIcon color=\"yellow\" size={72} />\n                    </BDiv>\n                    <form action=\"\" onSubmit={controlSubmit} noValidate>\n                        <h5 className=\"home__title text-center\">Вход в систему</h5>\n                        <BDiv \n                            className=\"input-field\" \n                            w=\"100\" \n                            display=\"flex\" \n                            justifyContent=\"around\" \n                            mt=\"5\"\n                        >\n                            <label htmlFor=\"first_name\">Username</label>\n                            <input \n                                id=\"first_name\" \n                                name=\"username\" \n                                type=\"text\" \n                                className={classNames('validate', {'inputError': errors.username})} \n                                value={values.username} onChange={controlChange} \n                            />\n                        </BDiv>\n                        <span>{errors.username && <p className=\"error\">{errors.username}</p>}</span>\n                        <BDiv \n                            className=\"input-field\" \n                            w=\"100\" \n                            display=\"flex\" \n                            justifyContent=\"around\" \n                            mt=\"4\"\n                        >\n                            <label htmlFor=\"password\">Password</label>\n                            <input \n                                id=\"password\" \n                                name=\"password\" \n                                type=\"password\" \n                                className={classNames('validate', {'inputError': errors.password})} \n                                value={values.password}  onChange={controlChange}\n                            />\n                        </BDiv>\n                        <span>{errors.password && <p className=\"error\">{errors.password}</p>}</span>\n                        <BDiv w=\"100\" display=\"flex\" justifyContent=\"around\">\n                            <button \n                                className=\"home__btn home__btn-login\" \n                                type=\"submit\"\n                            >{isLoading ? 'Входим...' : 'Вход'}</button>\n                        </BDiv>\n                    </form>\n                </section>\n            </BDiv>\n        </Fragment>\n    )\n};\n\nexport default AuthForm;","import React, { Fragment } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { BDiv } from 'bootstrap-4-react';\n\nimport AuthForm from './AuthForm';\n\nconst Auth = ({ token, setToken }) => {\n    console.log('render1');\n    return token ? (\n        <Fragment>\n            <h5 className=\"text-center\">Вы уже авторизованы!</h5>\n            <BDiv className=\"text-center mt-5\">\n              <Link to='/react-users-app/users' className=\"home__btn home__btn-back\">К списку пользователей</Link>\n            </BDiv>  \n        </Fragment>\n    ) : (\n        <Fragment>\n            <AuthForm setToken={setToken} />\n        </Fragment>\n    )\n};\n\nexport default Auth;","import React, { Fragment } from 'react';\n\nimport ArrowUpDownIcon from 'mdi-react/ArrowUpDownIcon';\n\nconst Users = ({ users, submitSort }) => {\n\n  return (\n    <Fragment>\n      <table className=\"table table-hover\">\n        <thead>\n          <tr>\n            <th className=\"text-center cursor-pointer\" onClick={submitSort}># <ArrowUpDownIcon /> </th>\n            <th className=\"text-center\">Логин</th>\n            <th className=\"text-center\">Фамилия</th>\n            <th className=\"text-center\">Имя</th>\n          </tr>\n        </thead>\n        <tbody>\n          {users.map((user) => (\n            <tr key={user.id}>\n              <td className=\"text-center\">{user.id}</td>\n              <td className=\"text-center\">{user.username}</td>\n              <td className=\"text-center\">{user.last_name}</td>\n              <td className=\"text-center\">{user.first_name}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </Fragment>\n  );\n};\n\nexport default Users;","import { useEffect, useState, useCallback } from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport _ from 'lodash';\n\nconst useUsersElements = ({ token, setToken }) => {\n    const [users, setUsers] = useState([]);\n    const [sortType, setSortType] = useState('asc'); \n    const [filteredUsers, setFilteredUsers] = useState(null);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [usersPerPage] = useState(20);\n\n    const baseURL = 'https://emphasoft-test-assignment.herokuapp.com/';\n    const APIusers = 'api/v1/users/';\n    const history = useHistory();\n\n    const indexOfLastListOfUsers = currentPage * usersPerPage;\n    const indexOfFirstListOfUsers = indexOfLastListOfUsers - usersPerPage;\n    const currentListOfUsers = users.slice(indexOfFirstListOfUsers, indexOfLastListOfUsers);\n\n    const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n    const submitSort = () => {\n      onSort('id');\n    };\n\n    const onSort = (sortField) => {\n      console.log('onSort');\n      setSortType(sortType === 'asc' ? 'desc' : 'asc');\n      setUsers(_.orderBy([...users], sortField, sortType));\n    };\n  \n  const onSearch = (val) => {\n    setFilteredUsers(getFilteredUsers(val));\n  };\n\n    const getFilteredUsers = useCallback(\n      (val) => {\n        if (val) {\n          return users.filter(u => u['username'].toLowerCase().trim().includes(val.toLowerCase().trim()));\n        }\n        return null;\n      },\n      [users]\n    );\n    \n    \n    useEffect(() => {\n      const getUsers = async (token) => {\n        try {\n          const response = await fetch(baseURL + APIusers, {\n              method: 'GET',\n              headers: {\n                Authorization: `Token ${token}`,\n              },\n            }\n          );\n  \n          if (response.ok) {\n            let json = await response.json();\n            setUsers(json);\n          }\n        } catch (err) {\n          console.error(err);\n        }\n      };\n  \n      if (token) {\n        getUsers(token);\n      }\n      return () => {\n      };\n    }, [token]);\n\n    \n    const controlLogout = useCallback(\n      () => {\n        setToken(null);\n        localStorage.clear();\n        history.push('/react-users-app');\n      },\n      [history, setToken]\n    )\n\n    return {\n      users,\n      filteredUsers,\n      controlLogout,\n      submitSort,\n      onSearch,\n      currentListOfUsers,\n      usersPerPage,\n      paginate\n    };\n  \n};\n\nexport default useUsersElements;","import React, { useState } from 'react';\nimport { Navbar, Button, Form, Collapse, BDiv } from 'bootstrap-4-react';\nimport useUsersElements from './useUsersElements';\n\nfunction FilterSearch({ token, setToken, onSearch }) {\n  const [searchName, setSearchName] = useState('');\n\n  const { controlLogout } = useUsersElements({ token, setToken });\n\n  const changeValue = e => setSearchName(e.target.value);\n\n  const controlSearch = () => onSearch(searchName);\n\n  const clearSearch = () => {\n    setSearchName('');\n    onSearch('');\n  };\n\n  return (\n    <>\n        <BDiv display=\"none lg-block xl-block\">\n          <Navbar expand=\"sm\" dark bg=\"dark\" mb=\"3\">\n            <Navbar.Brand href=\"#\">Emphasoft</Navbar.Brand>\n            <Navbar.Nav mx=\"auto\" display=\"flex\" alignItems=\"center\">\n              <Form.Input type=\"text\" text=\"white\" placeholder=\"Поиск по логину...\" mr=\"sm-2\" value={searchName} onChange={changeValue} />\n              <Button onClick={controlSearch} outline info ml=\"2\">Поиск</Button>\n              <Button onClick={clearSearch} outline info ml=\"2\">Очистить</Button>\n            </Navbar.Nav>\n            <BDiv float=\"right\">\n              <Button onClick={controlLogout} outline info ml=\"2\">Выход</Button>\n            </BDiv>  \n          </Navbar>\n        </BDiv>\n        <BDiv display=\"lg-none xl-none\">\n          <Collapse id=\"navbarToggleExternalContent\">\n          <BDiv bg=\"dark\" p=\"2\">\n            <Form.Input type=\"text\" text=\"white\" placeholder=\"Search\" m=\"lg-2\" value={searchName} onChange={changeValue} />\n          </BDiv>\n          <BDiv bg=\"dark\" p=\"2\" display=\"flex\" alignItems=\"center\" justifyContent=\"center\">\n              <Button onClick={controlSearch} outline info ml=\"2\">Поиск</Button>\n              <Button onClick={clearSearch} outline info ml=\"2\">Очистить</Button>\n              <Button onClick={controlLogout} outline info ml=\"2\">Выход</Button>\n          </BDiv>\n        </Collapse>\n        <Navbar dark bg=\"dark\" display=\"flex\" alignItems=\"center\">\n          <Navbar.Toggler target=\"#navbarToggleExternalContent\" />\n        </Navbar>\n        </BDiv>\n    </>\n  );\n}\nexport default FilterSearch;","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Nav } from 'bootstrap-4-react';\r\n\r\nconst Pagination = ({ usersPerPage, totalListOfUsers, paginate }) => {\r\n    const pageNumber = [];\r\n\r\n    for (let i = 1; i<=Math.ceil(totalListOfUsers / usersPerPage); i++){\r\n        pageNumber.push(i);\r\n    }\r\n\r\n    return (\r\n        <Nav display=\"flex\" justifyContent=\"center\" alignItems=\"center\" className=\"mt-2 mb-2\">\r\n            <ul className=\"pagination\">\r\n                {pageNumber.map(number => (\r\n                    <li key={number} className=\"page-item\">\r\n                        <Link onClick={() => paginate(number)} to=\"users#\" className=\"page-link\">{number}</Link>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </Nav>\r\n    )\r\n}\r\n\r\nexport default Pagination;","export default function isEmpty(value){\n    return  value === undefined ||\n            value === null ||\n            (typeof value === \"object\" && Object.keys(value).length === 0) ||\n            (typeof value === \"string\" && value.trim().length === 0)\n  }","import React, { Fragment } from 'react';\nimport { Link } from 'react-router-dom';\nimport { BDiv } from 'bootstrap-4-react';\n\nimport UsersList from './UsersList';\nimport FilterSearch from './FilterSearch';\nimport Pagination from './Pagination';\n\nimport useUsersElements from './useUsersElements';\nimport isEmpty from '../../plugins/isEmpty';\n\nconst Users = ({ token, setToken }) => {\n const { users, filteredUsers, onSearch, submitSort, currentListOfUsers, usersPerPage, paginate } = useUsersElements({ token, setToken });\n  return token ? (\n    <Fragment>\n      <FilterSearch onSearch={onSearch} setToken={setToken} />\n      { isEmpty(users) ? (\n        <h4 className=\"text-center\">Загрузка...</h4>\n      ) : isEmpty(filteredUsers) && filteredUsers ? (\n        <h5 className=\"text-center\">Пользователей с таким логином не найдено!</h5>\n      ) : (\n        <Fragment>\n          <UsersList \n            users={filteredUsers ? filteredUsers : currentListOfUsers} \n            submitSort={submitSort} \n            setToken={setToken} \n          />\n          <Pagination usersPerPage={usersPerPage} totalListOfUsers={users.length} paginate={paginate} />\n        </Fragment>\n      ) }\n    </Fragment>\n    ) : (\n    <Fragment>\n      <h5 className=\"text-center\">Вы не авторизованы!</h5>\n      <BDiv className=\"text-center mt-5\">\n        <Link to='/react-users-app/' className=\"home__btn home__btn-back\">Назад</Link>\n      </BDiv>  \n    </Fragment>\n  );\n};\n\nexport default Users;","import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Auth from './components/Auth/Auth';\nimport Users from './components/Users/Users';\n\nfunction App() {\n  const ls = localStorage.getItem('token');\n  const [token, setToken] = useState();\n\n  useEffect(() => {\n    if (ls) {\n      setToken(ls);\n    }\n  }, [ls]);\n  \n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route path='/react-users-app/users'>\n            <Users token={token} setToken={setToken} />\n          </Route>\n          <Route exact path='/react-users-app'>\n            <Auth token={token} setToken={setToken} />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.scss';\n\nimport '../node_modules/materialize-css/dist/css/materialize.min.css';\nimport '../node_modules/materialize-css/dist/js/materialize.min.js';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}