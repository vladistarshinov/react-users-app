(this["webpackJsonpreact-users-app"]=this["webpackJsonpreact-users-app"]||[]).push([[0],{249:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),c=a.n(s),l=a(9),o=a(23),m=a(7),u=a(5),i=a(4),p=function(e){var t={};return e.username?/^[\w.@+-]{6,150}$/.test(e.username)?"test_super"!==e.username&&(t.username="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d"):t.username="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d. \u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435":t.username="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",e.password?e.password.length<8?t.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"Nf<U4f<rDbtDxAPn"!==e.password&&(t.password="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"):t.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",t},f=a(30),E=a.n(f),b=a(31),d=a.n(b),h=a(12),g=a.n(h),k=a(19),v=a(20),x=a(45),j=function(e,t){var a=t.setToken,r=Object(n.useState)({username:"",password:""}),s=Object(m.a)(r,2),c=s[0],l=s[1],i=Object(n.useState)({}),p=Object(m.a)(i,2),f=p[0],E=p[1],b=Object(n.useState)(!1),d=Object(m.a)(b,2),h=d[0],j=d[1],N=Object(u.f)(),O=Object(o.a)();return{controlChange:function(e){var t=e.target,a=t.name,n=t.value;l(Object(x.a)({},c,Object(v.a)({},a,n)))},controlSubmit:function(){var t=Object(k.a)(g.a.mark((function t(n){var r,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),j(!0),t.prev=2,t.next=5,fetch("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:c.username,password:c.password})});case 5:if(!(r=t.sent).ok){t.next=16;break}return t.next=9,r.json();case 9:s=t.sent,a(s.token),localStorage.setItem("token",s.token),N.push("/react-users-app/users"),O.push("/react-users-app/users"),t.next=17;break;case 16:E(e(c));case 17:j(!1),t.next=28;break;case 20:if(t.prev=20,t.t0=t.catch(2),"AbortError"!==t.t0.name){t.next=27;break}alert("\u041f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u0439\u0442\u0438 \u043f\u043e\u0437\u0436\u0435!"),j(!1),t.next=28;break;case 27:throw t.t0;case 28:case"end":return t.stop()}}),t,null,[[2,20]])})));return function(e){return t.apply(this,arguments)}}(),values:c,errors:f,isLoading:h}},N=function(e){e.token;var t=e.setToken,a=j(p,{setToken:t}),s=a.controlChange,c=a.controlSubmit,l=a.values,o=a.errors,m=a.isLoading;return r.a.createElement(n.Fragment,null,r.a.createElement(i.BDiv,{id:"home",display:"flex",justifyContent:"around",alignItems:"center"},r.a.createElement("section",{className:"home"},r.a.createElement(i.BDiv,{className:"mt-3 text-center"},m?r.a.createElement(d.a,{className:"home__img",color:"yellow",size:72}):r.a.createElement(d.a,{color:"yellow",size:72})),r.a.createElement("form",{className:"home__form",action:"",onSubmit:c,noValidate:!0},r.a.createElement("h5",{className:"home__title text-center"},"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),r.a.createElement(i.BDiv,{className:"input-field",w:"100",display:"flex",justifyContent:"around",mt:"5"},r.a.createElement("label",{htmlFor:"first_name"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("input",{id:"first_name",name:"username",type:"text",className:E()("validate",{inputError:o.username}),value:l.username,onChange:s})),r.a.createElement("span",null,o.username&&r.a.createElement("p",{className:"error"},o.username)),r.a.createElement(i.BDiv,{className:"input-field",w:"100",display:"flex",justifyContent:"around",mt:"4"},r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{id:"password",name:"password",type:"password",className:E()("validate",{inputError:o.password}),value:l.password,onChange:s})),r.a.createElement("span",null,o.password&&r.a.createElement("p",{className:"error"},o.password)),r.a.createElement(i.BDiv,{mt:"2",w:"100",display:"flex",justifyContent:"around"},r.a.createElement("button",{className:"home__btn home__btn-login",type:"submit"},m?"\u0412\u0445\u043e\u0434\u0438\u043c...":"\u0412\u0445\u043e\u0434"))))))},O=function(e){var t=e.token,a=e.setToken;return console.log("render1"),t?r.a.createElement(n.Fragment,null,r.a.createElement("h5",{className:"text-center mt-5"},"\u0412\u044b \u0443\u0436\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!"),r.a.createElement(i.BDiv,{className:"text-center mt-5 mb-5"},r.a.createElement(l.b,{to:"/react-users-app/users",className:"home__btn home__btn-back"},"\u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"))):r.a.createElement(n.Fragment,null,r.a.createElement(N,{setToken:a}))},y=a(47),w=a.n(y),C=function(e){var t=e.users,a=e.submitSort;return r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center cursor-pointer",onClick:a},"# ",r.a.createElement(w.a,null)," "),r.a.createElement("th",{className:"text-center"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("th",{className:"text-center"},"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),r.a.createElement("th",{className:"text-center"},"\u0418\u043c\u044f"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"text-center"},e.id),r.a.createElement("td",{className:"text-center"},e.username),r.a.createElement("td",{className:"text-center"},e.last_name),r.a.createElement("td",{className:"text-center"},e.first_name))})))))},S=a(50),_=a(48),B=a.n(_),T=function(e){var t=e.token,a=e.setToken,r=Object(n.useState)([]),s=Object(m.a)(r,2),c=s[0],l=s[1],o=Object(n.useState)("asc"),i=Object(m.a)(o,2),p=i[0],f=i[1],E=Object(n.useState)(null),b=Object(m.a)(E,2),d=b[0],h=b[1],v=Object(n.useState)(1),x=Object(m.a)(v,2),j=x[0],N=x[1],O=Object(n.useState)(20),y=Object(m.a)(O,1)[0],w=Object(u.f)(),C=j*y,_=C-y,T=c.slice(_,C),D=function(e){f("asc"===p?"desc":"asc"),l(B.a.orderBy(Object(S.a)(c),e,p))},F=Object(n.useCallback)((function(e){return e?c.filter((function(t){return t.username.toLowerCase().trim().includes(e.toLowerCase().trim())})):null}),[c]);Object(n.useEffect)((function(){return t&&function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://emphasoft-test-assignment.herokuapp.com/api/v1/users/",{method:"GET",headers:{Authorization:"Token ".concat(t)}});case 3:if(!(a=e.sent).ok){e.next=9;break}return e.next=7,a.json();case 7:n=e.sent,l(n);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()(t),function(){}}),[t]);var I=Object(n.useCallback)((function(){a(null),localStorage.clear(),w.push("/react-users-app")}),[w,a]);return{users:c,filteredUsers:d,controlLogout:I,submitSort:function(){D("id")},onSearch:function(e){h(F(e))},currentListOfUsers:T,usersPerPage:y,paginate:function(e){return N(e)}}},D=function(e){var t=e.token,a=e.setToken,s=e.onSearch,c=Object(n.useState)(""),l=Object(m.a)(c,2),o=l[0],u=l[1],p=T({token:t,setToken:a}).controlLogout,f=function(e){return u(e.target.value)},E=function(){return s(o)},b=function(){u(""),s("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.BDiv,{display:"none lg-block xl-block"},r.a.createElement(i.Navbar,{expand:"sm",dark:!0,bg:"dark",mb:"3"},r.a.createElement(i.Navbar.Brand,{href:"#"},"Emphasoft"),r.a.createElement(i.Navbar.Nav,{mx:"auto",display:"flex",alignItems:"center"},r.a.createElement(i.Form.Input,{type:"text",text:"white",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043b\u043e\u0433\u0438\u043d\u0443...",mr:"sm-2",value:o,onChange:f}),r.a.createElement(i.Button,{onClick:E,outline:!0,info:!0,ml:"2"},"\u041f\u043e\u0438\u0441\u043a"),r.a.createElement(i.Button,{onClick:b,outline:!0,info:!0,ml:"2"},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c")),r.a.createElement(i.BDiv,{float:"right"},r.a.createElement(i.Button,{onClick:p,outline:!0,info:!0,ml:"2"},"\u0412\u044b\u0445\u043e\u0434")))),r.a.createElement(i.BDiv,{display:"lg-none xl-none"},r.a.createElement(i.Collapse,{id:"navbarToggleExternalContent"},r.a.createElement(i.BDiv,{bg:"dark",p:"2"},r.a.createElement(i.Form.Input,{type:"text",text:"white",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043b\u043e\u0433\u0438\u043d\u0443...",m:"lg-2",value:o,onChange:f})),r.a.createElement(i.BDiv,{bg:"dark",p:"2",display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(i.Button,{onClick:E,outline:!0,info:!0,ml:"2"},"\u041f\u043e\u0438\u0441\u043a"),r.a.createElement(i.Button,{onClick:b,outline:!0,info:!0,ml:"2"},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),r.a.createElement(i.Button,{onClick:p,outline:!0,info:!0,ml:"2"},"\u0412\u044b\u0445\u043e\u0434"))),r.a.createElement(i.Navbar,{dark:!0,bg:"dark",display:"flex",alignItems:"center"},r.a.createElement(i.Navbar.Toggler,{target:"#navbarToggleExternalContent"}))))},F=function(e){for(var t=e.usersPerPage,a=e.totalListOfUsers,n=e.paginate,s=[],c=1;c<=Math.ceil(a/t);c++)s.push(c);return r.a.createElement(i.Nav,{display:"flex",justifyContent:"center",alignItems:"center",className:"mt-2 mb-4"},r.a.createElement("ul",{className:"pagination"},s.map((function(e){return r.a.createElement("li",{key:e,className:"page-item"},r.a.createElement(l.b,{onClick:function(){return n(e)},to:"users#",className:"page-link"},e))}))))},I=a(49),L=a.n(I),P=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"loader",src:L.a,alt:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}))};function U(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}var z=function(e){var t=e.token,a=e.setToken,s=T({token:t,setToken:a}),c=s.users,o=s.filteredUsers,m=s.onSearch,u=s.submitSort,p=s.currentListOfUsers,f=s.usersPerPage,E=s.paginate;return t?r.a.createElement(n.Fragment,null,r.a.createElement(D,{onSearch:m,setToken:a}),U(c)?r.a.createElement(P,null):U(o)&&o?r.a.createElement("h5",{className:"text-center mt-5"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0442\u0430\u043a\u0438\u043c \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!"):r.a.createElement(n.Fragment,null,r.a.createElement(C,{users:o||p,submitSort:u,setToken:a}),r.a.createElement(F,{usersPerPage:f,totalListOfUsers:c.length,paginate:E}))):r.a.createElement(n.Fragment,null,r.a.createElement("h5",{className:"text-center mt-5"},"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!"),r.a.createElement(i.BDiv,{className:"text-center mt-5 mb-5"},r.a.createElement(l.b,{to:"/react-users-app/",className:"home__btn home__btn-back"},"\u041d\u0430\u0437\u0430\u0434")))};var A=function(){var e=localStorage.getItem("token"),t=Object(n.useState)(),a=Object(m.a)(t,2),s=a[0],c=a[1];return Object(n.useEffect)((function(){e&&c(e)}),[e]),r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/react-users-app/users"},r.a.createElement(z,{token:s,setToken:c})),r.a.createElement(u.a,{exact:!0,path:"/react-users-app"},r.a.createElement(O,{token:s,setToken:c})))))},J=(a(249),a(250),a(251),Object(o.a)());c.a.render(r.a.createElement(l.a,{history:J},r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null))),document.getElementById("root"))},49:function(e,t,a){e.exports=a.p+"static/media/loader.c402d4a9.gif"},51:function(e,t,a){e.exports=a(252)}},[[51,1,2]]]);
//# sourceMappingURL=main.df0296cc.chunk.js.map