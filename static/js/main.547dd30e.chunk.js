(this["webpackJsonpreact-users-app"]=this["webpackJsonpreact-users-app"]||[]).push([[0],{248:function(e,t,a){},249:function(e,t){e.exports={devServer:{historyApiFallback:!0}}},252:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(43),c=a.n(s),l=a(7),o=a(9),m=a(5),u=a(4),i=function(e){var t={};return e.username?/^[\w.@+-]{6,150}$/.test(e.username)?"test_super"!==e.username&&(t.username="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d"):t.username="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d. \u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435":t.username="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",e.password?e.password.length<8?t.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"Nf<U4f<rDbtDxAPn"!==e.password&&(t.password="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"):t.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",t},p=a(29),f=a.n(p),E=a(30),b=a.n(E),d=a(12),h=a.n(d),g=a(19),k=a(20),v=a(44),x=function(e,t){var a=t.setToken,r=Object(n.useState)({username:"",password:""}),s=Object(l.a)(r,2),c=s[0],o=s[1],u=Object(n.useState)({}),i=Object(l.a)(u,2),p=i[0],f=i[1],E=Object(n.useState)(!1),b=Object(l.a)(E,2),d=b[0],x=b[1],j=Object(m.f)();return{controlChange:function(e){var t=e.target,a=t.name,n=t.value;o(Object(v.a)({},c,Object(k.a)({},a,n)))},controlSubmit:function(){var t=Object(g.a)(h.a.mark((function t(n){var r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),x(!0),t.prev=2,t.next=5,fetch("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:c.username,password:c.password})});case 5:if(!(r=t.sent).ok){t.next=15;break}return t.next=9,r.json();case 9:s=t.sent,a(s.token),localStorage.setItem("token",s.token),j.push("/react-users-app/users"),t.next=16;break;case 15:f(e(c));case 16:x(!1),t.next=27;break;case 19:if(t.prev=19,t.t0=t.catch(2),"AbortError"!==t.t0.name){t.next=26;break}alert("\u041f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u0439\u0442\u0438 \u043f\u043e\u0437\u0436\u0435!"),x(!1),t.next=27;break;case 26:throw t.t0;case 27:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e){return t.apply(this,arguments)}}(),values:c,errors:p,isLoading:d}},j=function(e){e.token;var t=e.setToken,a=x(i,{setToken:t}),s=a.controlChange,c=a.controlSubmit,l=a.values,o=a.errors,m=a.isLoading;return r.a.createElement(n.Fragment,null,r.a.createElement(u.BDiv,{id:"home",display:"flex",justifyContent:"around",alignItems:"center"},r.a.createElement("section",{className:"home"},r.a.createElement(u.BDiv,{className:"mt-3 text-center"},m?r.a.createElement(b.a,{className:"home__img",color:"yellow",size:72}):r.a.createElement(b.a,{color:"yellow",size:72})),r.a.createElement("form",{className:"home__form",action:"",onSubmit:c,noValidate:!0},r.a.createElement("h5",{className:"home__title text-center"},"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),r.a.createElement(u.BDiv,{className:"input-field",w:"100",display:"flex",justifyContent:"around",mt:"5"},r.a.createElement("label",{htmlFor:"first_name"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("input",{id:"first_name",name:"username",type:"text",className:f()("validate",{inputError:o.username}),value:l.username,onChange:s})),r.a.createElement("span",null,o.username&&r.a.createElement("p",{className:"error"},o.username)),r.a.createElement(u.BDiv,{className:"input-field",w:"100",display:"flex",justifyContent:"around",mt:"4"},r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{id:"password",name:"password",type:"password",className:f()("validate",{inputError:o.password}),value:l.password,onChange:s})),r.a.createElement("span",null,o.password&&r.a.createElement("p",{className:"error"},o.password)),r.a.createElement(u.BDiv,{mt:"2",w:"100",display:"flex",justifyContent:"around"},r.a.createElement("button",{className:"home__btn home__btn-login",type:"submit"},m?"\u0412\u0445\u043e\u0434\u0438\u043c...":"\u0412\u0445\u043e\u0434"))))))},N=function(e){var t=e.token,a=e.setToken;return console.log("render1"),t?r.a.createElement(n.Fragment,null,r.a.createElement("h5",{className:"text-center mt-5"},"\u0412\u044b \u0443\u0436\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!"),r.a.createElement(u.BDiv,{className:"text-center mt-5 mb-5"},r.a.createElement(o.b,{to:"/react-users-app/users",className:"home__btn home__btn-back"},"\u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"))):r.a.createElement(n.Fragment,null,r.a.createElement(j,{setToken:a}))},O=a(46),y=a.n(O),w=function(e){var t=e.users,a=e.submitSort;return r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center cursor-pointer",onClick:a},"# ",r.a.createElement(y.a,null)," "),r.a.createElement("th",{className:"text-center"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("th",{className:"text-center"},"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),r.a.createElement("th",{className:"text-center"},"\u0418\u043c\u044f"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"text-center"},e.id),r.a.createElement("td",{className:"text-center"},e.username),r.a.createElement("td",{className:"text-center"},e.last_name),r.a.createElement("td",{className:"text-center"},e.first_name))})))))},C=a(49),S=a(47),_=a.n(S),B=function(e){var t=e.token,a=e.setToken,r=Object(n.useState)([]),s=Object(l.a)(r,2),c=s[0],o=s[1],u=Object(n.useState)("asc"),i=Object(l.a)(u,2),p=i[0],f=i[1],E=Object(n.useState)(null),b=Object(l.a)(E,2),d=b[0],k=b[1],v=Object(n.useState)(1),x=Object(l.a)(v,2),j=x[0],N=x[1],O=Object(n.useState)(20),y=Object(l.a)(O,1)[0],w=Object(m.f)(),S=j*y,B=S-y,T=c.slice(B,S),D=function(e){f("asc"===p?"desc":"asc"),o(_.a.orderBy(Object(C.a)(c),e,p))},F=Object(n.useCallback)((function(e){return e?c.filter((function(t){return t.username.toLowerCase().trim().includes(e.toLowerCase().trim())})):null}),[c]);Object(n.useEffect)((function(){return t&&function(){var e=Object(g.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://emphasoft-test-assignment.herokuapp.com/api/v1/users/",{method:"GET",headers:{Authorization:"Token ".concat(t)}});case 3:if(!(a=e.sent).ok){e.next=9;break}return e.next=7,a.json();case 7:n=e.sent,o(n);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()(t),function(){}}),[t]);var I=Object(n.useCallback)((function(){a(null),localStorage.clear(),w.push("/react-users-app")}),[w,a]);return{users:c,filteredUsers:d,controlLogout:I,submitSort:function(){D("id")},onSearch:function(e){k(F(e))},currentListOfUsers:T,usersPerPage:y,paginate:function(e){return N(e)}}},T=function(e){var t=e.token,a=e.setToken,s=e.onSearch,c=Object(n.useState)(""),o=Object(l.a)(c,2),m=o[0],i=o[1],p=B({token:t,setToken:a}).controlLogout,f=function(e){return i(e.target.value)},E=function(){return s(m)},b=function(){i(""),s("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.BDiv,{display:"none lg-block xl-block"},r.a.createElement(u.Navbar,{expand:"sm",dark:!0,bg:"dark",mb:"3"},r.a.createElement(u.Navbar.Brand,{href:"#"},"Emphasoft"),r.a.createElement(u.Navbar.Nav,{mx:"auto",display:"flex",alignItems:"center"},r.a.createElement(u.Form.Input,{type:"text",text:"white",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043b\u043e\u0433\u0438\u043d\u0443...",mr:"sm-2",value:m,onChange:f}),r.a.createElement(u.Button,{onClick:E,outline:!0,info:!0,ml:"2"},"\u041f\u043e\u0438\u0441\u043a"),r.a.createElement(u.Button,{onClick:b,outline:!0,info:!0,ml:"2"},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c")),r.a.createElement(u.BDiv,{float:"right"},r.a.createElement(u.Button,{onClick:p,outline:!0,info:!0,ml:"2"},"\u0412\u044b\u0445\u043e\u0434")))),r.a.createElement(u.BDiv,{display:"lg-none xl-none"},r.a.createElement(u.Collapse,{id:"navbarToggleExternalContent"},r.a.createElement(u.BDiv,{bg:"dark",p:"2"},r.a.createElement(u.Form.Input,{type:"text",text:"white",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043b\u043e\u0433\u0438\u043d\u0443...",m:"lg-2",value:m,onChange:f})),r.a.createElement(u.BDiv,{bg:"dark",p:"2",display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(u.Button,{onClick:E,outline:!0,info:!0,ml:"2"},"\u041f\u043e\u0438\u0441\u043a"),r.a.createElement(u.Button,{onClick:b,outline:!0,info:!0,ml:"2"},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),r.a.createElement(u.Button,{onClick:p,outline:!0,info:!0,ml:"2"},"\u0412\u044b\u0445\u043e\u0434"))),r.a.createElement(u.Navbar,{dark:!0,bg:"dark",display:"flex",alignItems:"center"},r.a.createElement(u.Navbar.Toggler,{target:"#navbarToggleExternalContent"}))))},D=function(e){for(var t=e.usersPerPage,a=e.totalListOfUsers,n=e.paginate,s=[],c=1;c<=Math.ceil(a/t);c++)s.push(c);return r.a.createElement(u.Nav,{display:"flex",justifyContent:"center",alignItems:"center",className:"mt-2 mb-4"},r.a.createElement("ul",{className:"pagination"},s.map((function(e){return r.a.createElement("li",{key:e,className:"page-item"},r.a.createElement(o.b,{onClick:function(){return n(e)},to:"users#",className:"page-link"},e))}))))},F=a(48),I=a.n(F),L=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"loader",src:I.a,alt:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}))};function P(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}var U=function(e){var t=e.token,a=e.setToken,s=B({token:t,setToken:a}),c=s.users,l=s.filteredUsers,m=s.onSearch,i=s.submitSort,p=s.currentListOfUsers,f=s.usersPerPage,E=s.paginate;return t?r.a.createElement(n.Fragment,null,r.a.createElement(T,{onSearch:m,setToken:a}),P(c)?r.a.createElement(L,null):P(l)&&l?r.a.createElement("h5",{className:"text-center mt-5"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0442\u0430\u043a\u0438\u043c \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!"):r.a.createElement(n.Fragment,null,r.a.createElement(w,{users:l||p,submitSort:i,setToken:a}),r.a.createElement(D,{usersPerPage:f,totalListOfUsers:c.length,paginate:E}))):r.a.createElement(n.Fragment,null,r.a.createElement("h5",{className:"text-center mt-5"},"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!"),r.a.createElement(u.BDiv,{className:"text-center mt-5 mb-5"},r.a.createElement(o.b,{to:"/react-users-app/",className:"home__btn home__btn-back"},"\u041d\u0430\u0437\u0430\u0434")))};var A=function(){var e=localStorage.getItem("token"),t=Object(n.useState)(),a=Object(l.a)(t,2),s=a[0],c=a[1];return Object(n.useEffect)((function(){e&&c(e)}),[e]),r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/react-users-app/users"},r.a.createElement(U,{token:s,setToken:c})),r.a.createElement(m.a,{exact:!0,path:"/react-users-app"},r.a.createElement(N,{token:s,setToken:c})),r.a.createElement(m.a,{path:"*",component:j}))))};a(248),a(249),a(250),a(251);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root"))},48:function(e,t,a){e.exports=a.p+"static/media/loader.c402d4a9.gif"},50:function(e,t,a){e.exports=a(252)}},[[50,1,2]]]);
//# sourceMappingURL=main.547dd30e.chunk.js.map